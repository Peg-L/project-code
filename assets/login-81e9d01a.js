import{a as c}from"./backtotop-7745fe90.js";import{s as u,G as d,p as m,a as g}from"./firebase-9e2df465.js";const f=document.querySelector("#loginButton");let p=document.querySelector("#floatingEmailLogin"),h=document.querySelector("#floatingPasswordLogin"),r,i;const t={email:"",password:"",user_phone:"",user_name:"",user_role:"學生",user_title:"",user_avatar:"",user_birthdate:"",user_gender:"",user_address:"",followList:[]};let n="";function l(o){c.post("https://project-code-json-k0ti.onrender.com/login",o).then(e=>{n=e.data.accessToken,console.log(n),localStorage.setItem("token",n),localStorage.setItem("userId",e.data.user.id),location.href="./index.html",localStorage.setItem("isLogin","1")}).catch(e=>{console.log(e),e.response.data=="Email and password are required"?Swal.fire({icon:"error",title:"請輸入帳號密碼",confirmButtonColor:"#115BC9",confirmButtonText:"OK"}):e.response.data=="Cannot find user"?Swal.fire({icon:"error",title:"查無此帳號",confirmButtonColor:"#115BC9",confirmButtonText:"OK"}):e.response.data=="Incorrect password"&&Swal.fire({icon:"error",title:"密碼錯誤",confirmButtonColor:"#115BC9",confirmButtonText:"OK"})})}window.location.href.includes("login.html")&&f.addEventListener("click",function(){r=p.value,i=h.value,t.email=r,t.password=i,l(t)});const a=document.querySelector("#google-login");a&&a.addEventListener("click",function(){console.log("點擊按鈕"),u(g,m).then(o=>{n=d.credentialFromResult(o).accessToken,localStorage.setItem("token",n);const s=o.user;t.email=s.email,t.password="00000000",l(t)}).catch(o=>{console.error(o)})});
