import{a as c}from"./backtotop-e931ed7f.js";import{s as u,G as d,p as g,a as m}from"./firebase-9e2df465.js";const f=document.querySelector("#loginButton");let p=document.querySelector("#floatingEmailLogin"),h=document.querySelector("#floatingPasswordLogin"),r,a;const t={email:"",password:"",user_phone:"",user_name:"",user_role:"學生",user_title:"",user_avatar:"",user_birthdate:"",user_gender:"",user_address:"",followList:[]};let n="";function i(e){c.post("http://localhost:3000/login",e).then(o=>{n=o.data.accessToken,console.log(n),localStorage.setItem("token",n),localStorage.setItem("userId",o.data.user.id),location.href="./index.html",localStorage.setItem("isLogin","1")}).catch(o=>{console.log(o),o.response.data=="Email and password are required"?Swal.fire({icon:"error",title:"請輸入帳號密碼",confirmButtonColor:"#115BC9",confirmButtonText:"OK"}):o.response.data=="Cannot find user"?Swal.fire({icon:"error",title:"查無此帳號",confirmButtonColor:"#115BC9",confirmButtonText:"OK"}):o.response.data=="Incorrect password"&&Swal.fire({icon:"error",title:"密碼錯誤",confirmButtonColor:"#115BC9",confirmButtonText:"OK"})})}window.location.href.includes("login.html")&&f.addEventListener("click",function(){r=p.value,a=h.value,t.email=r,t.password=a,i(t)});const l=document.querySelector("#google-login");l&&l.addEventListener("click",function(){console.log("點擊按鈕"),u(m,g).then(e=>{n=d.credentialFromResult(e).accessToken,localStorage.setItem("token",n);const s=e.user;t.email=s.email,t.password="00000000",i(t)}).catch(e=>{console.error(e)})});
