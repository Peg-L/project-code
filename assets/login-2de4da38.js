import"./backtotop-d0934485.js";import{_ as c}from"./config-28f3114d.js";import{s as u,G as d,p as m,a as g}from"./firebase-9e2df465.js";const f=document.querySelector("#loginButton");let p=document.querySelector("#floatingEmailLogin"),h=document.querySelector("#floatingPasswordLogin"),n,r;const t={email:"",password:"",user_phone:"",user_name:"",user_role:"學生",user_title:"",user_avatar:"",user_birthdate:"",user_gender:"",user_address:""};let i="";function s(o){axios.post(`${c}/login`,o).then(e=>{localStorage.setItem("userId",e.data.user.id),location.href="./index.html",localStorage.setItem("isLogin","1")}).catch(e=>{console.error(e),e.response.data=="Email and password are required"?Swal.fire({icon:"error",title:"請輸入帳號密碼",confirmButtonColor:"#115BC9",confirmButtonText:"OK"}):e.response.data=="Cannot find user"?Swal.fire({icon:"error",title:"查無此帳號",confirmButtonColor:"#115BC9",confirmButtonText:"OK"}):e.response.data=="Incorrect password"&&Swal.fire({icon:"error",title:"密碼錯誤",confirmButtonColor:"#115BC9",confirmButtonText:"OK"})})}window.location.href.includes("login.html")&&f.addEventListener("click",function(){n=p.value,r=h.value,t.email=n,t.password=r,s(t)});const a=document.querySelector("#google-login");a&&a.addEventListener("click",function(){console.log("點擊按鈕"),u(g,m).then(o=>{i=d.credentialFromResult(o).accessToken,localStorage.setItem("accessToken",i);const l=o.user;t.email=l.email,t.password="00000000",s(t)}).catch(o=>{console.error(o)})});
