import"./backtotop-e6f982ee.js";import{f as n}from"./firebase-f51430d4.js";const u="https://project-code-json-k0ti.onrender.com",d=document.querySelector("#loginButton");let m=document.querySelector("#floatingEmailLogin"),g=document.querySelector("#floatingPasswordLogin"),r,i;const t={email:"",password:"",user_phone:"",user_name:"",user_role:"學生",user_title:"",user_avatar:"",user_birthdate:"",user_gender:"",user_address:""};let s="";function a(o){axios.post(`${u}/login`,o).then(e=>{localStorage.setItem("userId",e.data.user.id),location.href="./index.html",localStorage.setItem("isLogin","1")}).catch(e=>{console.error(e),e.response.data=="Email and password are required"?Swal.fire({icon:"error",title:"請輸入帳號密碼",confirmButtonColor:"#115BC9",confirmButtonText:"OK"}):e.response.data=="Cannot find user"?Swal.fire({icon:"error",title:"查無此帳號",confirmButtonColor:"#115BC9",confirmButtonText:"OK"}):e.response.data=="Incorrect password"&&Swal.fire({icon:"error",title:"密碼錯誤",confirmButtonColor:"#115BC9",confirmButtonText:"OK"})})}window.location.href.includes("login.html")&&d.addEventListener("click",function(){r=m.value,i=g.value,t.email=r,t.password=i,a(t)});const l=document.querySelector("#google-login");l&&l.addEventListener("click",function(){console.log("點擊按鈕"),n.signInWithPopup(n.auth,n.provider).then(o=>{s=n.GoogleAuthProvider.credentialFromResult(o).accessToken,localStorage.setItem("accessToken",s);const c=o.user;t.email=c.email,t.password="00000000",a(t)}).catch(o=>{console.error(o)})});
